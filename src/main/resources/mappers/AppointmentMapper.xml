<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.consult_app.demo.mappers.AppointmentsMapper">

    <resultMap id="appointmentResultMap" type="com.consult_app.demo.models.Appointments">
        <result property="appointmentId" column="appointment_id" />
        <result property="userId" column="user_id" />
        <result property="doctorId" column="doctor_id" />
        <result property="appointmentDate" column="appointment_date" />
        <result property="appointmentTime" column="appointment_time" />

        <result property="status" column="status" />
        <result property="priorityIndex" column="priority_index" />
        <result property="followUpNotes" column="follow_up_notes " />
        <result property="createdAt" column="created_at" />
        <result property="updatedAt" column="updated_at" />
    </resultMap>

    <select id="getAppointmentsByDoctorId" resultMap="appointmentResultMap">
        SELECT * FROM "Appointments" WHERE doctor_id = #{doctorId}
    </select>
<select id="getWaitingAppointments" resultMap="appointmentResultMap">
    SELECT * FROM "Appointments "  WHERE status = 'Waiting              '
</select>
<select id="getConfirmedAppointments" resultMap="appointmentResultMap">
    SELECT * FROM "Appointments "  WHERE status = 'Confirmed           '
</select>
<select id="getCancelAppointments" resultMap="appointmentResultMap">
    SELECT * FROM "Appointments "  WHERE status = 'Cancel              '
</select>
    <update id="updateStatus">
        UPDATE "Appointments " 
        SET

            status = #{status}
     
        WHERE appointment_id = #{appointmentId}
    </update>
        <update id="updateStatuscancel">
        UPDATE "Appointments " 
        SET

            "follow_up_notes " = #{reason},
     		status = #{status}
        WHERE appointment_id = #{appointmentId}
    </update>

    <!-- Thêm các truy vấn SQL khác nếu cần -->

</mapper>
